<div class="min-h-screen bg-base-200 py-8 lg:py-12">
    <div class="container mx-auto px-4 lg:px-12">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
            <div>
                <h1 class="text-3xl font-bold font-display text-base-content">Settings</h1>
                <p class="text-slate-500 mt-1">Manage your preferences and account security</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- Sidebar Navigation -->
            <aside class="lg:col-span-3">
                <div class="bg-base-100 rounded-2xl shadow-sm border border-base-300 p-2 sticky top-24">
                    <ul class="menu w-full gap-1">
                        <li>
                            <button (click)="activeTab.set('general')" [class.active]="activeTab() === 'general'"
                                class="rounded-xl font-semibold">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4">
                                    </path>
                                </svg>
                                General
                            </button>
                        </li>
                        <li>
                            <button (click)="activeTab.set('notifications')"
                                [class.active]="activeTab() === 'notifications'" class="rounded-xl font-semibold">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                                    </path>
                                </svg>
                                Notifications
                            </button>
                        </li>
                        <li>
                            <button (click)="activeTab.set('accessibility')"
                                [class.active]="activeTab() === 'accessibility'" class="rounded-xl font-semibold">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M22 6.5A4.5 4.5 0 0117.5 11 4.5 4.5 0 0113 6.5 4.5 4.5 0 0117.5 2a4.5 4.5 0 014.5 4.5zM12.5 13a4.5 4.5 0 01-4.5 4.5 4.5 4.5 0 01-4.5-4.5 4.5 4.5 0 014.5-4.5 4.5 4.5 0 014.5 4.5zM22 17.5a4.5 4.5 0 01-4.5 4.5 4.5 4.5 0 01-4.5-4.5 4.5 4.5 0 014.5-4.5 4.5 4.5 0 014.5 4.5z">
                                    </path>
                                </svg>
                                Accessibility
                            </button>
                        </li>
                        <li>
                            <button (click)="activeTab.set('security')" [class.active]="activeTab() === 'security'"
                                class="rounded-xl font-semibold text-error">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                    </path>
                                </svg>
                                Security & Data
                            </button>
                        </li>
                    </ul>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="lg:col-span-9 space-y-6">

                <!-- GENERAL SETTINGS -->
                <div *ngIf="activeTab() === 'general'" class="card-academic p-8 animate-fade-in bg-base-100">
                    <h2 class="text-xl font-bold mb-6 font-display">Appearance</h2>

                    <!-- Theme Toggle -->
                    <div
                        class="flex items-center justify-between p-4 border border-base-200 rounded-xl hover:bg-base-200/50 transition-colors">
                        <div class="flex items-center gap-4">
                            <div class="p-3 bg-primary/10 rounded-lg text-primary">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                                    </path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold">Dark Mode</h3>
                                <p class="text-sm text-slate-500">Switch between light and dark themes</p>
                            </div>
                        </div>
                        <input type="checkbox" class="toggle toggle-primary" [checked]="themeService.theme() === 'dark'"
                            (change)="toggleTheme()" />
                    </div>
                </div>

                <!-- NOTIFICATIONS SETTINGS -->
                <div *ngIf="activeTab() === 'notifications'" class="card-academic p-8 animate-fade-in bg-base-100">
                    <h2 class="text-xl font-bold mb-6 font-display">Notification Preferences</h2>

                    <div class="space-y-4">
                        <!-- Email -->
                        <div class="form-control">
                            <label class="label cursor-pointer justify-start gap-4">
                                <input type="checkbox" class="checkbox checkbox-primary"
                                    [(ngModel)]="notifications().email" (change)="updateNotifs()" />
                                <span class="label-text font-semibold text-lg">Email Notifications</span>
                            </label>
                            <p class="text-sm text-slate-500 pl-9">Receive updates about courses and assignments via
                                email.</p>
                        </div>
                        <div class="divider my-2"></div>

                        <!-- Push -->
                        <div class="form-control">
                            <label class="label cursor-pointer justify-start gap-4">
                                <input type="checkbox" class="checkbox checkbox-primary"
                                    [(ngModel)]="notifications().push" (change)="updateNotifs()" />
                                <span class="label-text font-semibold text-lg">Push Notifications</span>
                            </label>
                            <p class="text-sm text-slate-500 pl-9">Get real-time alerts on your device.</p>
                        </div>
                        <div class="divider my-2"></div>

                        <!-- Marketing -->
                        <div class="form-control">
                            <label class="label cursor-pointer justify-start gap-4">
                                <input type="checkbox" class="checkbox checkbox-primary"
                                    [(ngModel)]="notifications().marketing" (change)="updateNotifs()" />
                                <span class="label-text font-semibold text-lg">Promotional Emails</span>
                            </label>
                            <p class="text-sm text-slate-500 pl-9">Receive news about new features and courses.</p>
                        </div>
                    </div>
                </div>

                <!-- ACCESSIBILITY SETTINGS -->
                <div *ngIf="activeTab() === 'accessibility'" class="card-academic p-8 animate-fade-in bg-base-100">
                    <h2 class="text-xl font-bold mb-6 font-display">Accessibility</h2>

                    <!-- Font Size -->
                    <div class="mb-8">
                        <label class="label"><span class="label-text font-bold mb-2 block">Text Size</span></label>
                        <input type="range" min="0" max="2" steps="1" class="range range-primary"
                            [value]="themeService.accessibility().fontSize === 'normal' ? 0 : (themeService.accessibility().fontSize === 'large' ? 1 : 2)"
                            (input)="updateAccessibility('font', $any($event.target).value == 0 ? 'normal' : ($any($event.target).value == 1 ? 'large' : 'x-large'))" />
                        <div class="w-full flex justify-between text-xs px-2 mt-2 font-bold text-slate-500">
                            <span>Normal</span>
                            <span>Large</span>
                            <span>Extra Large</span>
                        </div>
                    </div>

                    <!-- Reduce Motion -->
                    <div class="flex items-center justify-between p-4 border border-base-200 rounded-xl">
                        <div class="flex items-center gap-4">
                            <div class="p-3 bg-primary/10 rounded-lg text-primary">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z">
                                    </path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold">Reduce Motion</h3>
                                <p class="text-sm text-slate-500">Minimize animations and transitions</p>
                            </div>
                        </div>
                        <input type="checkbox" class="toggle toggle-primary"
                            [checked]="themeService.accessibility().reduceMotion"
                            (change)="updateAccessibility('motion', $any($event.target).checked)" />
                    </div>
                </div>

                <!-- SECURITY SETTINGS -->
                <div *ngIf="activeTab() === 'security'" class="space-y-6 animate-fade-in">
                    <!-- Password Change -->
                    <div class="card-academic p-8 bg-base-100">
                        <h2 class="text-xl font-bold mb-6 font-display">Change Password</h2>
                        <div class="space-y-4 max-w-lg">
                            <div class="form-control">
                                <label class="label"><span class="label-text font-bold">Current Password</span></label>
                                <input type="password" [(ngModel)]="passwordData.current"
                                    class="input input-bordered w-full rounded-lg" placeholder="••••••••" />
                            </div>
                            <div class="form-control">
                                <label class="label"><span class="label-text font-bold">New Password</span></label>
                                <input type="password" [(ngModel)]="passwordData.new"
                                    class="input input-bordered w-full rounded-lg" placeholder="••••••••" />
                            </div>
                            <div class="form-control">
                                <label class="label"><span class="label-text font-bold">Confirm New
                                        Password</span></label>
                                <input type="password" [(ngModel)]="passwordData.confirm"
                                    class="input input-bordered w-full rounded-lg" placeholder="••••••••" />
                            </div>
                            <button (click)="changePassword()" class="btn btn-primary rounded-xl mt-4">Update
                                Password</button>
                        </div>
                    </div>

                    <!-- Danger Zone -->
                    <div class="card-academic p-8 border-error/20 bg-error/5">
                        <h2 class="text-xl font-bold mb-4 font-display text-error">Danger Zone</h2>
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="font-bold text-slate-800">Clear Application Data</h3>
                                <p class="text-sm text-slate-500">Removes local preferences and logs you out.</p>
                            </div>
                            <button (click)="clearData()" class="btn btn-outline btn-error rounded-xl">Clear
                                Data</button>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>
</div>